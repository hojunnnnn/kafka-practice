# kafka-practice


kafka를 사용하며 마주칠 수 있는 데이터 정합성 문제, 메시지 유실, 중복 처리 등의 다양한 이슈를 해결하고 데이터 일관성과 메시지의 신뢰성을 보장하는 구조를 직접 구현해보기 위한 프로젝트입니다.

<br/>

## 프로젝트 목표

> 1. Transactional Outbox Pattern을 통해 비즈니스 로직과 Kafka 메시지 발행을 원자적으로 처리하고, Eventual Consistency를 보장한다.
>
> 2. 중복 메시지 처리를 방지하기 위해 Idempotent한 Consumer를 구현하여 Exactly-Once에 가까운 효과를 얻는다.

<br/>

## Producer

### 해결하고자 하는 문제
**1.** **비즈니스 로직과 메시지 발행 간 정합성 문제**
- **문제:** 
비즈니스 로직과 메시지 발행이 별도의 시스템에서 일어나므로, 둘 중 하나만 성공하고 다른 하나는 실패할 수 있다.
- **해결:** 
event_outbox 테이블을 사용해 메시지를 트랜잭션의 일부로 저장함으로써 두 작업을 원자적으로 만든다.

**2.** **시스템 장애시 메시지 유실**
- **문제:** 
브로커로 메시지를 보내다가 실패할 경우(네트워크 이슈 등) 해당 메시지는 유실된다.
- **해결:** 
메시지를 저장하고, 이후에 발행함으로써 장애 상황에도 메시지를 복구할 수 있다.

<br/>


## Consumer
